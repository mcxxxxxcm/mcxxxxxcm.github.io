<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æƒ…ä¾£æ¸¸æˆ</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            margin: 0;
            padding: 20px;
            min-height: 100vh;
            background-image: url("https://img0.baidu.com/it/u=307997310,2392949902&fm=253&fmt=auto&app=138&f=JPEG?w=1145&h=800");
            background-size: cover;
            background-position: center;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background: rgba(255, 255, 255, 0.5);
            border-radius: 15px;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }

        .game-board {
            display: grid;
            grid-template-columns: repeat(10, 1fr);
            gap: 5px;
            margin: 20px 0;
        }

        .cell {
            aspect-ratio: 1;
            border: 2px solid #ddd;
            border-radius: 8px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 12px;
            text-align: center;
            padding: 40px 5px 5px;
            position: relative;
            background: #f6d5f2;
        }

        .player {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            position: absolute;
            top: 5px;
            transition: all 0.5s ease;
            background-size: cover;
            background-position: center;
            border: 2px solid white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .player1 {
            background-image: url('../resources/pictures/ç‹è‰ºæ¶µå¤´åƒ.jpg');
            left: 5px;
        }

        .player2 {
            background-image: url('../resources/pictures/æ¯å´‡å¾å¤´åƒ.jpg');
            right: 5px;
        }

        .roll-btn {
            padding: 10px 20px;
            font-size: 16px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: linear-gradient(145deg, #ff69b4, #4169e1);
            color: white;
            margin: 10px auto;
            display: block;
        }

        .roll-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .roll-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .message {
            text-align: center;
            margin: 20px 0;
            font-size: 16px;
            line-height: 1.6;
            color: #333;
        }

        .number-display {
            font-size: 24px;
            font-weight: bold;
            text-align: center;
            margin: 20px 0;
            color: #f1d42d;
        }

        .start-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            /* background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%); */
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            background-image: url("https://img0.baidu.com/it/u=307997310,2392949902&fm=253&fmt=auto&app=138&f=JPEG?w=1145&h=800");
            background-size: cover;
            background-position: center;
        }

        .start-content {
            text-align: center;
            background: #f6d5f2;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }

        .start-btn {
            padding: 15px 40px;
            font-size: 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            background: linear-gradient(145deg, #ff69b4, #4169e1);
            color: white;
            transition: all 0.3s ease;
        }

        .start-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .game-container {
            display: none;
        }

        /* æ·»åŠ è·èƒœå¼¹çª—æ ·å¼ */
        .win-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .win-content {
            background: white;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 0 20px rgba(0,0,0,0.2);
        }

        .next-game-btn {
            padding: 12px 25px;
            font-size: 18px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            background: linear-gradient(145deg, #ff69b4, #4169e1);
            color: white;
            margin-top: 20px;
            transition: all 0.3s ease;
        }

        .next-game-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
    </style>
</head>
<body>
    <!-- æ·»åŠ å¼€å§‹ç•Œé¢ -->
    <div class="start-screen" id="startScreen">
        <div class="start-content">
            <h1>æƒ…ä¾£æ¸¸æˆ</h1>
            <p>å‡†å¤‡å¥½å¼€å§‹ä¸€æ®µç”œèœœçš„å†’é™©äº†å—ï¼Ÿ</p>
            <button class="start-btn" id="startBtn">å¼€å§‹æ¸¸æˆ</button>
        </div>
    </div>

    <!-- å°†åŸæœ‰å†…å®¹åŒ…è£…åœ¨game-containerä¸­ -->
    <div class="game-container" id="gameContainer">
        <div class="container">
            <h1 style="text-align: center;">æƒ…ä¾£æ¸¸æˆ</h1>
            <div class="game-board" id="gameBoard"></div>
            <div class="number-display" id="numberDisplay">ç‚¹æ•°: 1</div>
            <button class="roll-btn" id="rollBtn">æŠ•æ·éª°å­</button>
            <div class="message" id="message">ç©å®¶1å›åˆ</div>
        </div>
    </div>

    <!-- åœ¨bodyä¸­æ·»åŠ è·èƒœå¼¹çª— -->
    <div class="win-modal" id="winModal">
        <div class="win-content">
            <h2>ğŸ‰ æ­å–œè·èƒœï¼ ğŸ‰</h2>
            <p id="winMessage"></p>
            <button class="next-game-btn" onclick="window.location.href='../part3/ç¬¬ä¸‰éƒ¨åˆ†.html'">
                æˆ‘ä»¬çš„å°ä¸–ç•Œ
            </button>
        </div>
    </div>

    <script>
        let currentPlayer = 1;
        let player1Position = 0;
        let player2Position = 0;
        const totalCells = 50;

        const gameEvents = [
            "è„±æ‰ä¸€ä»¶è¡£æœ",
            "å–ä¸€å£é…’",
            "ä»°å§èµ·å10ä¸ª",
            "è„±æ‰ä¸€ä»¶è¡£æœ",
            "å’Œå¯¹æ–¹æ‹¥æŠ±10ç§’",
            "ç”¨å˜´å·´å–‚å¯¹æ–¹åƒä¸œè¥¿",
            "å¯¹è§†30ç§’ä¸èƒ½ç¬‘",
            "ä¸ºå¯¹æ–¹å”±ä¸€é¦–æ­Œ",
            "è„±æ‰ä¸€ä»¶è¡£æœ",
            "kisskiss",
            "åŠç“¶å•¤é…’",
            "æŠ•æ·è€…åƒä¸‹ä¸€é¢—ç³–ï¼Œå¦ä¸€ä½ç©å®¶å“å°åçŒœå‘³é“",
            "è¯´å‡ºå¯¹æ–¹åä¸ªä¼˜ç‚¹",
            "ä¸ºå¯¹æ–¹ç”»è‚–åƒç”»å¹¶ä¸Šä¼ æœ‹å‹åœˆ",
            "æ¨¡ä»¿å¯¹æ–¹çš„è¡¨æƒ…ï¼Œæ‹ç…§çºªå¿µ",
            "ç©¿é»‘ä¸",
            "åŠç“¶å•¤é…’",
            "è¿™æ¬¡è§é¢ç§°å‘¼å¯¹æ–¹ä¸ºçˆ¸çˆ¸",
            "è¯´å‡ºç¬¬ä¸€æ¬¡è§é¢çš„æ„Ÿå—",
            "åˆ†äº«ä¸€ä¸ªç§˜å¯†",
            "å‰ªåˆ€çŸ³å¤´å¸ƒï¼Œè¾“äº†çš„äº²å¯¹æ–¹èº«ä½“1åˆ†é’Ÿï¼Œä¸èƒ½äº²å»é‡å¤çš„ä½ç½®",
            "æŠ•æ·è€…åƒä¸‹ä¸€é¢—ç³–ï¼Œå¦ä¸€ä½ç©å®¶å“å°åçŒœå‘³é“",
            "ç©¿é»‘ä¸",
            "ç©¿ä¸€ä»¶è¡£æœ",
            "è¯´å‡ºå¯¹æ–¹ä¸‰ä¸ªä¼˜ç‚¹",
            "ç©¿ä¸€ä»¶è¡£æœ",
            "è„±æ‰ä¸€ä»¶è¡£æœ",
            "çœŸå¿ƒè¯å¤§å†’é™©",
            "3è¿æ‹",
            "è¯´å‡ºå¯¹æ–¹ä¸‰ä¸ªä¼˜ç‚¹",
            "é…’æ¡Œæ¸¸æˆ",
            "å–ä¸€å£é…’",
            "å‰ªåˆ€çŸ³å¤´å¸ƒï¼Œè¾“äº†çš„äº²å¯¹æ–¹èº«ä½“1åˆ†é’Ÿï¼Œä¸èƒ½äº²å»é‡å¤çš„ä½ç½®",
            "æŠ•æ·è€…åƒä¸‹ä¸€é¢—ç³–ï¼Œå¦ä¸€ä½ç©å®¶å“å°åçŒœå‘³é“",
            "è¯´ä¸‰ä¸ªåœŸå‘³æƒ…è¯",
            "å‰ªåˆ€çŸ³å¤´å¸ƒï¼Œè¾“äº†çš„å–ä¸€å£é…’",
            "æŠ•æ·è€…åƒä¸‹ä¸€é¢—ç³–ï¼Œå¦ä¸€ä½ç©å®¶å“å°åçŒœå‘³é“",
            "ç©¿ä¸€ä»¶è¡£æœ",
            "å–ä¸€å£é…’",
            "ç©¿ä¸€ä»¶è¡£æœ",
            "é…’æ¡Œæ¸¸æˆ",
            "çœŸå¿ƒè¯å¤§å†’é™©",
            "ç”¨å˜´å·´å–‚å¯¹æ–¹åƒä¸œè¥¿",
            "é…’æ¡Œæ¸¸æˆ",
            "æ¨¡ä»¿å¯¹æ–¹çš„è¡¨æƒ…ï¼Œæ‹ç…§çºªå¿µ",
            "ç©æ¸¸æˆï¼Œè¾“äº†çš„å–ä¸€å£é…’",
            "ç©¿é»‘ä¸",
            "å¯¹è§†30ç§’ä¸èƒ½ç¬‘",
            "ä¸ºå¯¹æ–¹å”±ä¸€é¦–æ­Œ",
            "èƒœåˆ©ï¼å¯ä»¥æŒ‡å®šå¯¹æ–¹åšä¸€ä»¶äº‹"
        ];

        function createBoard() {
            const board = document.getElementById('gameBoard');
            for (let i = 0; i < totalCells; i++) {
                const cell = document.createElement('div');
                cell.className = 'cell';
                cell.textContent = gameEvents[i % gameEvents.length];
                board.appendChild(cell);
            }
            updatePlayerPositions();
        }

        function updatePlayerPositions() {
            document.querySelectorAll('.player').forEach(el => el.remove());
            
            if (player1Position < totalCells) {
                const cell1 = document.querySelectorAll('.cell')[player1Position];
                const player1Marker = document.createElement('div');
                player1Marker.className = 'player player1';
                cell1.appendChild(player1Marker);
            }
            
            if (player2Position < totalCells) {
                const cell2 = document.querySelectorAll('.cell')[player2Position];
                const player2Marker = document.createElement('div');
                player2Marker.className = 'player player2';
                cell2.appendChild(player2Marker);
            }
        }

        function movePlayerWithAnimation(steps) {
            const currentPosition = currentPlayer === 1 ? player1Position : player2Position;
            let newPosition = currentPosition + steps;
            let currentStep = currentPosition;
            const rollBtn = document.getElementById('rollBtn');
            rollBtn.disabled = true;

            function moveOneStep() {
                if (currentStep < newPosition && currentStep < totalCells - 1) {
                    currentStep++;
                    if (currentPlayer === 1) {
                        player1Position = currentStep;
                    } else {
                        player2Position = currentStep;
                    }
                    updatePlayerPositions();

                    if (currentStep < newPosition && currentStep < totalCells - 1) {
                        setTimeout(moveOneStep, 500);
                    } else {
                        finishMove(currentStep);
                    }
                } else {
                    finishMove(currentStep);
                }
            }

            function finishMove(finalPosition) {
                const event = gameEvents[finalPosition % gameEvents.length];
                
                if (finalPosition >= totalCells - 1) {
                    document.getElementById('message').innerHTML = `ç©å®¶${currentPlayer}è·èƒœï¼ğŸ‰`;
                    rollBtn.disabled = true;
                    
                    // æ˜¾ç¤ºè·èƒœå¼¹çª—
                    const winModal = document.getElementById('winModal');
                    const winMessage = document.getElementById('winMessage');
                    winMessage.textContent = `ç©å®¶${currentPlayer}è·å¾—äº†èƒœåˆ©ï¼`;
                    winModal.style.display = 'flex';
                    return;
                }

                document.getElementById('message').innerHTML = 
                    `ç©å®¶${currentPlayer}æ·å‡ºäº†${steps}ç‚¹<br>
                    è½åœ¨æ ¼å­${finalPosition + 1}<br>
                    äº‹ä»¶ï¼š${event}`;

                currentPlayer = currentPlayer === 1 ? 2 : 1;
                document.getElementById('message').innerHTML += `<br><br>è½®åˆ°ç©å®¶${currentPlayer}å›åˆ`;
                rollBtn.disabled = false;
            }

            moveOneStep();
        }

        // æ·»åŠ ä¸Šä¸€æ¬¡çš„ç‚¹æ•°è®°å½•
        let lastNumber = 0;

        // ä¼˜åŒ–åçš„éšæœºæ•°ç”Ÿæˆå‡½æ•°
        function generateNumber() {
            let number;
            do {
                number = Math.floor(Math.random() * 6) + 1;
            } while (number === lastNumber);  // å¦‚æœç”Ÿæˆçš„æ•°å­—ä¸ä¸Šæ¬¡ç›¸åŒï¼Œåˆ™é‡æ–°ç”Ÿæˆ
            
            lastNumber = number;  // è®°å½•è¿™æ¬¡ç”Ÿæˆçš„æ•°å­—
            return number;
        }

        // ä¿®æ”¹ç‚¹å‡»äº‹ä»¶ç›‘å¬å™¨
        document.getElementById('rollBtn').addEventListener('click', function() {
            // åœ¨ç¬¬ä¸€æ¬¡ç‚¹å‡»æ—¶æ’­æ”¾éŸ³ä¹
            if (audio.paused) {
                audio.play();
            }
            
            const number = generateNumber();
            document.getElementById('numberDisplay').textContent = `ç‚¹æ•°: ${number}`;
            setTimeout(() => {
                movePlayerWithAnimation(number);
            }, 500);
        });

        // æ·»åŠ å¼€å§‹æ¸¸æˆçš„é€»è¾‘
        const audio = new Audio('../resources/musics/çˆ±çš„å›å½’çº¿.mp3');
        audio.loop = true;

        document.getElementById('startBtn').addEventListener('click', function() {
            // æ’­æ”¾éŸ³ä¹
            audio.play();
            
            // éšè—å¼€å§‹ç•Œé¢
            document.getElementById('startScreen').style.display = 'none';
            
            // æ˜¾ç¤ºæ¸¸æˆç•Œé¢
            document.getElementById('gameContainer').style.display = 'block';
            
            // åˆå§‹åŒ–æ¸¸æˆ
            createBoard();
        });

        // ç§»é™¤åŸæœ‰çš„createBoard()è°ƒç”¨ï¼Œå› ä¸ºç°åœ¨å®ƒä¼šåœ¨ç‚¹å‡»å¼€å§‹æŒ‰é’®åè°ƒç”¨
        // ç§»é™¤é‡å¤çš„äº‹ä»¶ç›‘å¬å™¨
    </script>
</body>
</html>
